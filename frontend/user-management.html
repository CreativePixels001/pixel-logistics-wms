<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Pixel Logistics - User Management">
  <title>Pixel Logistics - User Management</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Main Layout -->
  <div class="layout">
    
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title" onclick="toggleSidebarSection(this)">
          <span>Main Menu</span>
          <svg class="sidebar-title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </div>
        <ul class="sidebar-menu">
          <li class="sidebar-item">
            <a href="index.html" class="sidebar-link">
              <span class="sidebar-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="7" height="7"></rect>
                  <rect x="14" y="3" width="7" height="7"></rect>
                  <rect x="14" y="14" width="7" height="7"></rect>
                  <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
              </span>
              <span>Dashboard</span>
            </a>
          </li>
          <li class="sidebar-item">
            <a href="user-management.html" class="sidebar-link active">
              <span class="sidebar-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
              </span>
              <span>User Management</span>
            </a>
          </li>
          <li class="sidebar-item">
            <a href="access-control.html" class="sidebar-link">
              <span class="sidebar-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
              </span>
              <span>Access Control</span>
            </a>
          </li>
          <li class="sidebar-item">
            <a href="location-management.html" class="sidebar-link">
              <span class="sidebar-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                  <circle cx="12" cy="10" r="3"></circle>
                </svg>
              </span>
              <span>Location Management</span>
            </a>
          </li>
        </ul>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      
      <!-- Breadcrumb -->
      <div class="breadcrumb">
        <span class="breadcrumb-item">Administration</span>
        <span class="breadcrumb-item active">User Management</span>
      </div>
      
      <!-- Page Header -->
      <div class="page-header">
        <div>
          <h1 class="page-title">User Management</h1>
          <p class="page-subtitle">Manage system users, roles, and permissions</p>
        </div>
        <div style="display: flex; gap: var(--spacing-sm);">
          <button class="btn btn-outline" onclick="toggleFilters()" id="headerFilterBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
              <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
            </svg>
            Filters
          </button>
          <button class="btn btn-secondary" onclick="exportUsers()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            Export Users
          </button>
          <button class="btn btn-primary" onclick="showCreateUserModal()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            Create User
          </button>
        </div>
      </div>

      <!-- User Statistics -->
      <div class="grid grid-cols-4 mb-xl">
        <div class="stat-card">
          <div class="stat-label">Total Users</div>
          <div class="stat-value">48</div>
          <div class="stat-change">+3 this month</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-label">Active Users</div>
          <div class="stat-value">42</div>
          <div class="stat-change">87.5% active</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-label">Administrators</div>
          <div class="stat-value">5</div>
          <div class="stat-change">Full system access</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-label">Inactive Users</div>
          <div class="stat-value">6</div>
          <div class="stat-change">Locked or disabled</div>
        </div>
      </div>

      <!-- Filters -->
      <div class="mb-md">
        <button class="filter-toggle-btn" id="filterToggleBtn" onclick="toggleFilters()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
          </svg>
          <span id="filterToggleText">Show Filters</span>
          <span class="filter-badge" id="filterBadge" style="display: none;">0</span>
        </button>
      </div>

      <div class="filter-panel" id="filterPanel">
        <div class="filter-header">
          <div class="filter-title">Search & Filter Users</div>
          <button class="btn btn-sm btn-outline" onclick="clearAllFilters(); filterUsers();">Clear All</button>
        </div>
        
        <div class="filter-grid" style="grid-template-columns: repeat(3, 1fr);">
          <div class="form-group">
            <label class="form-label" style="font-size: 13px; font-weight: 500;">Search Users</label>
            <input type="text" class="form-input" id="searchUser" placeholder="Name, email, or username" onkeyup="filterUsers()" style="height: 38px; font-size: 13px;">
          </div>
            
          <div class="form-group">
            <label class="form-label" style="font-size: 13px; font-weight: 500;">Role</label>
            <select class="form-input" id="filterRole" onchange="filterUsers()" style="height: 38px; font-size: 13px;">
              <option value="">All Roles</option>
              <option value="admin">Administrator</option>
              <option value="manager">Warehouse Manager</option>
              <option value="supervisor">Supervisor</option>
              <option value="worker">Warehouse Worker</option>
              <option value="clerk">Inventory Clerk</option>
            </select>
          </div>
            
          <div class="form-group">
            <label class="form-label" style="font-size: 13px; font-weight: 500;">Status</label>
            <select class="form-input" id="filterStatus" onchange="filterUsers()" style="height: 38px; font-size: 13px;">
              <option value="">All Status</option>
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
              <option value="locked">Locked</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Users Table -->
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">System Users</h3>
        </div>
        <div class="card-body">
          <div class="table-container">
            <table class="table" id="usersTable">
              <thead>
                <tr>
                  <th>User</th>
                  <th>Username</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Department</th>
                  <th>Status</th>
                  <th>Last Login</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="usersTableBody">
                <tr>
                  <td>
                    <div style="display: flex; align-items: center; gap: 10px;">
                      <div class="user-avatar" style="width: 32px; height: 32px; font-size: 12px;">AK</div>
                      <strong>Ashish Kumar</strong>
                    </div>
                  </td>
                  <td>ashish.kumar</td>
                  <td>ashish.kumar@deloitte.com</td>
                  <td><span class="badge badge-primary">Administrator</span></td>
                  <td>IT Operations</td>
                  <td><span class="badge badge-primary">Active</span></td>
                  <td>2025-11-16 10:30</td>
                  <td>
                    <div style="display: flex; gap: 4px;">
                      <button class="btn btn-sm btn-outline" onclick="editUser(1)" title="Edit">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-outline" onclick="viewUserPermissions(1)" title="Permissions">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-outline" onclick="resetPassword(1)" title="Reset Password">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path>
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div style="display: flex; align-items: center; gap: 10px;">
                      <div class="user-avatar" style="width: 32px; height: 32px; font-size: 12px; background: #333;">JD</div>
                      <strong>John Doe</strong>
                    </div>
                  </td>
                  <td>john.doe</td>
                  <td>john.doe@deloitte.com</td>
                  <td><span class="badge badge-default">Manager</span></td>
                  <td>Warehouse Operations</td>
                  <td><span class="badge badge-primary">Active</span></td>
                  <td>2025-11-16 09:15</td>
                  <td>
                    <div style="display: flex; gap: 4px;">
                      <button class="btn btn-sm btn-outline" onclick="editUser(2)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-outline" onclick="viewUserPermissions(2)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-outline" onclick="resetPassword(2)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path>
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div style="display: flex; align-items: center; gap: 10px;">
                      <div class="user-avatar" style="width: 32px; height: 32px; font-size: 12px; background: #666;">SM</div>
                      <strong>Sarah Miller</strong>
                    </div>
                  </td>
                  <td>sarah.miller</td>
                  <td>sarah.miller@deloitte.com</td>
                  <td><span class="badge badge-default">Supervisor</span></td>
                  <td>Receiving</td>
                  <td><span class="badge badge-primary">Active</span></td>
                  <td>2025-11-15 16:45</td>
                  <td>
                    <div style="display: flex; gap: 4px;">
                      <button class="btn btn-sm btn-outline" onclick="editUser(3)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-outline" onclick="viewUserPermissions(3)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-outline" onclick="resetPassword(3)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path>
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div style="display: flex; align-items: center; gap: 10px;">
                      <div class="user-avatar" style="width: 32px; height: 32px; font-size: 12px; background: #999;">MB</div>
                      <strong>Mike Brown</strong>
                    </div>
                  </td>
                  <td>mike.brown</td>
                  <td>mike.brown@deloitte.com</td>
                  <td><span class="badge badge-outline">Worker</span></td>
                  <td>Picking</td>
                  <td><span class="badge badge-outline">Inactive</span></td>
                  <td>2025-11-10 14:20</td>
                  <td>
                    <div style="display: flex; gap: 4px;">
                      <button class="btn btn-sm btn-outline" onclick="editUser(4)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-outline" onclick="viewUserPermissions(4)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                      </button>
                      <button class="btn btn-sm btn-outline" onclick="resetPassword(4)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path>
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </main>
  </div>

  <!-- Search Overlay -->
  <div class="search-overlay" id="searchOverlay"></div>

  <script src="js/auth.js"></script>
  <script src="js/sidebar.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/main.js"></script>
  <script src="js/search.js"></script>
  <script src="js/common-header.js"></script>
  <script src="js/filters.js"></script>

  <script>
    function toggleUserMenu() {
      document.querySelector('.user-dropdown').classList.toggle('show');
    }

    function viewProfile() {
      alert('Profile management coming soon!');
    }

    function changePassword() {
      alert('Change password coming soon!');
    }

    function logout() {
      if (confirm('Are you sure you want to logout?')) {
        window.location.href = 'login.html';
      }
    }

    window.addEventListener('click', function(e) {
      if (!e.target.closest('.user-menu')) {
        document.querySelector('.user-dropdown')?.classList.remove('show');
      }
    });

    // User management functions
    function showCreateUserModal() {
      alert('Create User form coming in Phase 6!');
    }

    function editUser(userId) {
      alert(`Edit user ${userId} - Form coming in Phase 6!`);
    }

    function viewUserPermissions(userId) {
      window.location.href = `access-control.html?user=${userId}`;
    }

    function resetPassword(userId) {
      if (confirm('Send password reset email to this user?')) {
        alert('Password reset email sent successfully!');
      }
    }

    function filterUsers() {
      const searchTerm = document.getElementById('searchUser').value.toLowerCase();
      const roleFilter = document.getElementById('filterRole').value;
      const statusFilter = document.getElementById('filterStatus').value;
      
      const rows = document.querySelectorAll('#usersTableBody tr');
      
      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        const role = row.querySelector('.badge').textContent.toLowerCase();
        const statusBadge = row.querySelectorAll('.badge')[1];
        const status = statusBadge ? statusBadge.textContent.toLowerCase() : '';
        
        const matchesSearch = text.includes(searchTerm);
        const matchesRole = !roleFilter || role.includes(roleFilter.toLowerCase());
        const matchesStatus = !statusFilter || status.includes(statusFilter.toLowerCase());
        
        row.style.display = matchesSearch && matchesRole && matchesStatus ? '' : 'none';
      });
    }

    function resetFilters() {
      document.getElementById('searchUser').value = '';
      document.getElementById('filterRole').value = '';
      document.getElementById('filterStatus').value = '';
      filterUsers();
    }

    function exportUsers() {
      alert('Export users to CSV/Excel - Feature coming soon!');
    }
  </script>

  <!-- Create User Modal -->
  <div class="modal-overlay" id="createUserModal" style="display: none;">
    <div class="modal-container" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
      <div class="modal-header">
        <h2 class="modal-title">Create New User</h2>
        <button class="modal-close" onclick="closeCreateUserModal()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <form id="createUserForm">
          <!-- Personal Information -->
          <div class="form-section">
            <h3 class="form-section-title">Personal Information</h3>
            <div class="form-grid grid-cols-2">
              <div class="form-group">
                <label for="firstName" class="form-label required">First Name</label>
                <input type="text" id="firstName" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="lastName" class="form-label required">Last Name</label>
                <input type="text" id="lastName" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="email" class="form-label required">Email Address</label>
                <input type="email" id="email" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="phone" class="form-label">Phone Number</label>
                <input type="tel" id="phone" class="form-control">
              </div>
            </div>
          </div>

          <!-- Account Information -->
          <div class="form-section">
            <h3 class="form-section-title">Account Information</h3>
            <div class="form-grid grid-cols-2">
              <div class="form-group">
                <label for="username" class="form-label required">Username</label>
                <input type="text" id="username" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="employeeId" class="form-label">Employee ID</label>
                <input type="text" id="employeeId" class="form-control">
              </div>
              <div class="form-group">
                <label for="department" class="form-label">Department</label>
                <select id="department" class="form-control">
                  <option value="">Select Department</option>
                  <option value="warehouse">Warehouse Operations</option>
                  <option value="receiving">Receiving</option>
                  <option value="shipping">Shipping</option>
                  <option value="inventory">Inventory Control</option>
                  <option value="quality">Quality Assurance</option>
                  <option value="admin">Administration</option>
                </select>
              </div>
              <div class="form-group">
                <label for="jobTitle" class="form-label">Job Title</label>
                <input type="text" id="jobTitle" class="form-control">
              </div>
            </div>
          </div>

          <!-- Role & Permissions -->
          <div class="form-section">
            <h3 class="form-section-title">Role & Permissions</h3>
            <div class="form-grid grid-cols-2">
              <div class="form-group">
                <label for="userRole" class="form-label required">User Role</label>
                <select id="userRole" class="form-control" required>
                  <option value="">Select Role</option>
                  <option value="admin">Administrator</option>
                  <option value="manager">Warehouse Manager</option>
                  <option value="supervisor">Supervisor</option>
                  <option value="operator">Warehouse Operator</option>
                  <option value="viewer">Viewer Only</option>
                </select>
              </div>
              <div class="form-group">
                <label for="userStatus" class="form-label required">Status</label>
                <select id="userStatus" class="form-control" required>
                  <option value="active" selected>Active</option>
                  <option value="inactive">Inactive</option>
                  <option value="pending">Pending Activation</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Access Permissions</label>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-sm); margin-top: var(--spacing-sm);">
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="receiving" style="cursor: pointer;">
                  <span>Receiving Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="putaway" style="cursor: pointer;">
                  <span>Put-away Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="picking" style="cursor: pointer;">
                  <span>Picking Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="packing" style="cursor: pointer;">
                  <span>Packing Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="shipping" style="cursor: pointer;">
                  <span>Shipping Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="inventory" style="cursor: pointer;">
                  <span>Inventory Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="reports" style="cursor: pointer;">
                  <span>Reports Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="admin" style="cursor: pointer;">
                  <span>Administration</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Additional Settings -->
          <div class="form-section">
            <h3 class="form-section-title">Additional Settings</h3>
            <div class="form-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" id="sendWelcomeEmail" style="cursor: pointer;" checked>
                <span>Send welcome email with login credentials</span>
              </label>
            </div>
            <div class="form-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" id="requirePasswordChange" style="cursor: pointer;" checked>
                <span>Require password change on first login</span>
              </label>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeCreateUserModal()">Cancel</button>
        <button class="btn btn-primary" onclick="saveNewUser()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Create User
        </button>
      </div>
    </div>
  </div>

  <!-- Edit User Modal -->
  <div class="modal-overlay" id="editUserModal" style="display: none;">
    <div class="modal-container" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
      <div class="modal-header">
        <h2 class="modal-title">Edit User</h2>
        <button class="modal-close" onclick="closeEditUserModal()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <form id="editUserForm">
          <input type="hidden" id="editUserId">
          
          <!-- Personal Information -->
          <div class="form-section">
            <h3 class="form-section-title">Personal Information</h3>
            <div class="form-grid grid-cols-2">
              <div class="form-group">
                <label for="editFirstName" class="form-label required">First Name</label>
                <input type="text" id="editFirstName" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="editLastName" class="form-label required">Last Name</label>
                <input type="text" id="editLastName" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="editEmail" class="form-label required">Email Address</label>
                <input type="email" id="editEmail" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="editPhone" class="form-label">Phone Number</label>
                <input type="tel" id="editPhone" class="form-control">
              </div>
            </div>
          </div>

          <!-- Account Information -->
          <div class="form-section">
            <h3 class="form-section-title">Account Information</h3>
            <div class="form-grid grid-cols-2">
              <div class="form-group">
                <label for="editUsername" class="form-label required">Username</label>
                <input type="text" id="editUsername" class="form-control" required readonly>
                <small style="color: var(--text-secondary); font-size: 0.75rem;">Username cannot be changed</small>
              </div>
              <div class="form-group">
                <label for="editEmployeeId" class="form-label">Employee ID</label>
                <input type="text" id="editEmployeeId" class="form-control">
              </div>
              <div class="form-group">
                <label for="editDepartment" class="form-label">Department</label>
                <select id="editDepartment" class="form-control">
                  <option value="">Select Department</option>
                  <option value="warehouse">Warehouse Operations</option>
                  <option value="receiving">Receiving</option>
                  <option value="shipping">Shipping</option>
                  <option value="inventory">Inventory Control</option>
                  <option value="quality">Quality Assurance</option>
                  <option value="admin">Administration</option>
                </select>
              </div>
              <div class="form-group">
                <label for="editJobTitle" class="form-label">Job Title</label>
                <input type="text" id="editJobTitle" class="form-control">
              </div>
            </div>
          </div>

          <!-- Role & Permissions -->
          <div class="form-section">
            <h3 class="form-section-title">Role & Permissions</h3>
            <div class="form-grid grid-cols-2">
              <div class="form-group">
                <label for="editUserRole" class="form-label required">User Role</label>
                <select id="editUserRole" class="form-control" required>
                  <option value="">Select Role</option>
                  <option value="admin">Administrator</option>
                  <option value="manager">Warehouse Manager</option>
                  <option value="supervisor">Supervisor</option>
                  <option value="operator">Warehouse Operator</option>
                  <option value="viewer">Viewer Only</option>
                </select>
              </div>
              <div class="form-group">
                <label for="editUserStatus" class="form-label required">Status</label>
                <select id="editUserStatus" class="form-control" required>
                  <option value="active">Active</option>
                  <option value="inactive">Inactive</option>
                  <option value="pending">Pending Activation</option>
                  <option value="locked">Locked</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Access Permissions</label>
              <div id="editPermissionsGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-sm); margin-top: var(--spacing-sm);">
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="receiving" class="edit-permission" style="cursor: pointer;">
                  <span>Receiving Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="putaway" class="edit-permission" style="cursor: pointer;">
                  <span>Put-away Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="picking" class="edit-permission" style="cursor: pointer;">
                  <span>Picking Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="packing" class="edit-permission" style="cursor: pointer;">
                  <span>Packing Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="shipping" class="edit-permission" style="cursor: pointer;">
                  <span>Shipping Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="inventory" class="edit-permission" style="cursor: pointer;">
                  <span>Inventory Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="reports" class="edit-permission" style="cursor: pointer;">
                  <span>Reports Module</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                  <input type="checkbox" value="admin" class="edit-permission" style="cursor: pointer;">
                  <span>Administration</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Account Actions -->
          <div class="form-section">
            <h3 class="form-section-title">Account Actions</h3>
            <div style="display: flex; gap: var(--spacing-md); flex-wrap: wrap;">
              <button type="button" class="btn btn-outline" onclick="resetUserPassword()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                Reset Password
              </button>
              <button type="button" class="btn btn-outline" onclick="unlockUserAccount()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 9.9-1"></path>
                </svg>
                Unlock Account
              </button>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeEditUserModal()">Cancel</button>
        <button class="btn btn-primary" onclick="updateUser()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Save Changes
        </button>
      </div>
    </div>
  </div>

  <style>
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: var(--spacing-lg);
    }

    .modal-container {
      background: var(--card-bg);
      border-radius: var(--border-radius-lg);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      width: 100%;
      max-width: 600px;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-md) var(--spacing-lg);
      border-bottom: 1px solid var(--border-color);
    }

    .modal-title {
      font-size: var(--font-size-xl);
      font-weight: 600;
      margin: 0;
      color: var(--text-primary);
    }

    .modal-close {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.25rem;
      color: var(--text-secondary);
      transition: color 0.2s ease;
    }

    .modal-close:hover {
      color: var(--text-primary);
    }

    .modal-body {
      padding: var(--spacing-md) var(--spacing-lg);
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: var(--spacing-md);
      padding: var(--spacing-md) var(--spacing-lg);
      border-top: 1px solid var(--border-color);
    }

    .form-section {
      margin-bottom: var(--spacing-lg);
    }

    .form-section:last-child {
      margin-bottom: 0;
    }

    .form-section-title {
      font-size: var(--font-size-base);
      font-weight: 600;
      margin-bottom: var(--spacing-md);
      color: var(--text-primary);
      padding-bottom: var(--spacing-sm);
      border-bottom: 1px solid var(--border-color);
    }

    .form-grid {
      display: grid;
      gap: var(--spacing-md);
    }

    .form-grid.grid-cols-2 {
      grid-template-columns: repeat(2, 1fr);
    }

    @media (max-width: 768px) {
      .form-grid.grid-cols-2 {
        grid-template-columns: 1fr;
      }
    }
  </style>

  <script>
    // Sample user data for edit modal
    const usersData = {
      'USR001': {
        id: 'USR001',
        firstName: 'John',
        lastName: 'Smith',
        email: 'john.smith@pixellogistics.com',
        phone: '+1 555-0101',
        username: 'jsmith',
        employeeId: 'EMP001',
        department: 'warehouse',
        jobTitle: 'Warehouse Manager',
        role: 'manager',
        status: 'active',
        permissions: ['receiving', 'putaway', 'picking', 'packing', 'shipping', 'inventory', 'reports']
      },
      'USR002': {
        id: 'USR002',
        firstName: 'Sarah',
        lastName: 'Johnson',
        email: 'sarah.johnson@pixellogistics.com',
        phone: '+1 555-0102',
        username: 'sjohnson',
        employeeId: 'EMP002',
        department: 'receiving',
        jobTitle: 'Receiving Supervisor',
        role: 'supervisor',
        status: 'active',
        permissions: ['receiving', 'putaway', 'inventory']
      }
    };

    function showCreateUserModal() {
      document.getElementById('createUserModal').style.display = 'flex';
      document.getElementById('createUserForm').reset();
    }

    function closeCreateUserModal() {
      if (confirm('Close without saving? All changes will be lost.')) {
        document.getElementById('createUserModal').style.display = 'none';
      }
    }

    function saveNewUser() {
      const form = document.getElementById('createUserForm');
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      const userData = {
        firstName: document.getElementById('firstName').value,
        lastName: document.getElementById('lastName').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        username: document.getElementById('username').value,
        employeeId: document.getElementById('employeeId').value,
        department: document.getElementById('department').value,
        jobTitle: document.getElementById('jobTitle').value,
        role: document.getElementById('userRole').value,
        status: document.getElementById('userStatus').value,
        sendWelcomeEmail: document.getElementById('sendWelcomeEmail').checked,
        requirePasswordChange: document.getElementById('requirePasswordChange').checked,
        createdAt: new Date().toISOString()
      };

      console.log('Creating new user:', userData);
      alert('User created successfully!\n\nUsername: ' + userData.username + '\nEmail: ' + userData.email);
      document.getElementById('createUserModal').style.display = 'none';
    }

    function editUser(userId) {
      const user = usersData[userId];
      if (!user) {
        alert('User not found');
        return;
      }

      // Populate edit form
      document.getElementById('editUserId').value = user.id;
      document.getElementById('editFirstName').value = user.firstName;
      document.getElementById('editLastName').value = user.lastName;
      document.getElementById('editEmail').value = user.email;
      document.getElementById('editPhone').value = user.phone || '';
      document.getElementById('editUsername').value = user.username;
      document.getElementById('editEmployeeId').value = user.employeeId || '';
      document.getElementById('editDepartment').value = user.department || '';
      document.getElementById('editJobTitle').value = user.jobTitle || '';
      document.getElementById('editUserRole').value = user.role;
      document.getElementById('editUserStatus').value = user.status;

      // Set permissions
      document.querySelectorAll('.edit-permission').forEach(checkbox => {
        checkbox.checked = user.permissions.includes(checkbox.value);
      });

      document.getElementById('editUserModal').style.display = 'flex';
    }

    function closeEditUserModal() {
      if (confirm('Close without saving? All changes will be lost.')) {
        document.getElementById('editUserModal').style.display = 'none';
      }
    }

    function updateUser() {
      const form = document.getElementById('editUserForm');
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      const userId = document.getElementById('editUserId').value;
      const userData = {
        id: userId,
        firstName: document.getElementById('editFirstName').value,
        lastName: document.getElementById('editLastName').value,
        email: document.getElementById('editEmail').value,
        phone: document.getElementById('editPhone').value,
        employeeId: document.getElementById('editEmployeeId').value,
        department: document.getElementById('editDepartment').value,
        jobTitle: document.getElementById('editJobTitle').value,
        role: document.getElementById('editUserRole').value,
        status: document.getElementById('editUserStatus').value,
        permissions: Array.from(document.querySelectorAll('.edit-permission:checked')).map(cb => cb.value),
        updatedAt: new Date().toISOString()
      };

      console.log('Updating user:', userData);
      alert('User updated successfully!\n\nUser ID: ' + userId);
      document.getElementById('editUserModal').style.display = 'none';
    }

    function resetUserPassword() {
      if (confirm('Send password reset email to this user?')) {
        alert('Password reset email sent successfully!');
      }
    }

    function unlockUserAccount() {
      if (confirm('Unlock this user account?')) {
        alert('User account unlocked successfully!');
      }
    }

    // Close modal on ESC key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        const createModal = document.getElementById('createUserModal');
        const editModal = document.getElementById('editUserModal');
        if (createModal.style.display === 'flex') {
          closeCreateUserModal();
        }
        if (editModal.style.display === 'flex') {
          closeEditUserModal();
        }
      }
    });

    // Close modal on overlay click
    document.getElementById('createUserModal')?.addEventListener('click', (e) => {
      if (e.target.id === 'createUserModal') {
        closeCreateUserModal();
      }
    });

    document.getElementById('editUserModal')?.addEventListener('click', (e) => {
      if (e.target.id === 'editUserModal') {
        closeEditUserModal();
      }
    });
  </script>
</body>
</html>
